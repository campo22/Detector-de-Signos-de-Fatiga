<div class="container mx-auto p-6">
  @if (!currentUser()) {
  <div class="text-center p-20 text-muted-foreground">
    <span class="material-symbols-outlined text-6xl animate-spin">progress_activity</span>
    <p class="mt-4 text-lg">{{ 'USER_PROFILE.LOADING_PROFILE' | translate }}</p>
  </div>
  } @else if (currentUser() === undefined) {
  <div class="text-center p-20 text-destructive">
    <span class="material-symbols-outlined text-6xl">error</span>
    <p class="mt-4 text-lg">{{ 'USER_PROFILE.ERROR_LOADING_PROFILE' | translate }}</p>
  </div>
  } @else {
  <p-card header="{{ 'USER_PROFILE.TITLE' | translate }}" styleClass="max-w-2xl mx-auto">
    <form [formGroup]="profileForm" (ngSubmit)="saveProfile()">
      <div class="p-fluid">
        <div class="field">
          <label for="name">{{ 'USER_PROFILE.NAME' | translate }}</label>
          <input id="name" type="text" pInputText formControlName="name" [readonly]="!isEditMode">
        </div>
        <div class="field">
          <label for="email">{{ 'USER_PROFILE.EMAIL' | translate }}</label>
          <input id="email" type="text" pInputText formControlName="email" readonly>
        </div>
        <div class="field">
          <label for="role">{{ 'USER_PROFILE.ROLE' | translate }}</label>
          <input id="role" type="text" pInputText formControlName="role" readonly>
        </div>
        <div class="field">
          <label for="status">{{ 'USER_PROFILE.STATUS' | translate }}</label>
          <input id="status" type="text" pInputText [value]="currentUser()!.activo ? ('USER_PROFILE.ACTIVE' | translate) : ('USER_PROFILE.INACTIVE' | translate)" readonly>
        </div>
      </div>
    </form>
    <ng-template pTemplate="footer">
      <div class="flex justify-end gap-2">
        @if (isEditMode) {
        <button pButton type="button" label="{{ 'CANCEL' | translate }}" icon="pi pi-times" (click)="toggleEditMode()" class="p-button-secondary"></button>
        <button pButton type="submit" label="{{ 'SAVE' | translate }}" icon="pi pi-check" (click)="saveProfile()" [disabled]="profileForm.invalid"></button>
        } @else {
        <button pButton type="button" label="{{ 'EDIT' | translate }}" icon="pi pi-pencil" (click)="toggleEditMode()"></button>
        }
      </div>
    </ng-template>
  </p-card>
  }
</div>
