<p-toast></p-toast>
<div class="relative flex min-h-screen w-full items-center justify-center p-4" style="background-image: radial-gradient(circle at top, rgba(16, 25, 34, 0.8), #101922 70%);">
  <div class="absolute inset-0 bg-background/50 backdrop-blur-sm"></div>
  <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" class="relative w-full max-w-lg rounded-xl border border-white/10 bg-[#14202c] p-8 shadow-2xl shadow-primary/10 sm:p-12">
    <div class="flex flex-col items-center text-center">
      <p class="text-3xl font-black leading-tight tracking-[-0.033em] text-primary sm:text-4xl">{{ 'AUTH.RESET_PASSWORD.TITLE' | translate }}</p>
      <p class="mt-2 text-base font-normal leading-normal text-gray-400">{{ 'AUTH.RESET_PASSWORD.INSTRUCTIONS' | translate }}</p>
    </div>
    <div class="mt-10 space-y-6">
      <!-- New Password -->
      <div>
        <label class="mb-2 block text-sm font-medium leading-normal text-white" for="new-password">{{ 'AUTH.RESET_PASSWORD.NEW_PASSWORD' | translate }}</label>
        <div class="relative flex w-full items-stretch">
            <input
                pInputText
                class="h-12 w-full flex-1 rounded-lg border border-gray-700 bg-background px-4 text-white placeholder:text-gray-500 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/50"
                id="new-password"
                [type]="showNewPassword ? 'text' : 'password'"
                formControlName="newPassword"
                placeholder="{{ 'AUTH.RESET_PASSWORD.NEW_PASSWORD_PLACEHOLDER' | translate }}"
            />
            <button type="button" (click)="toggleNewPassword()" class="absolute inset-y-0 right-0 flex items-center pr-4 text-gray-400 hover:text-primary">
                <span class="material-symbols-outlined">{{ showNewPassword ? 'visibility' : 'visibility_off' }}</span>
            </button>
        </div>
      </div>
      <!-- Confirm New Password -->
      <div>
        <label class="mb-2 block text-sm font-medium leading-normal text-white" for="confirm-password">{{ 'AUTH.RESET_PASSWORD.CONFIRM_PASSWORD' | translate }}</label>
        <div class="relative flex w-full items-stretch">
            <input
                pInputText
                class="h-12 w-full flex-1 rounded-lg border border-gray-700 bg-background px-4 text-white placeholder:text-gray-500 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/50"
                id="confirm-password"
                [type]="showConfirmPassword ? 'text' : 'password'"
                formControlName="confirmPassword"
                placeholder="Confirma tu nueva contraseÃ±a"
            />
            <button type="button" (click)="toggleConfirmPassword()" class="absolute inset-y-0 right-0 flex items-center pr-4 text-gray-400 hover:text-primary">
                <span class="material-symbols-outlined">{{ showConfirmPassword ? 'visibility' : 'visibility_off' }}</span>
            </button>
        </div>
        <small class="p-error block mt-1" *ngIf="resetPasswordForm.get('confirmPassword')?.touched && resetPasswordForm.errors?.['mismatch']">
          {{ 'AUTH.RESET_PASSWORD.PASSWORDS_MISMATCH' | translate }}
        </small>
      </div>
    </div>
    <!-- Password Requirements -->
    <div class="mt-8 space-y-3">
        <div class="flex items-center gap-x-3">
            <span class="material-symbols-outlined" [ngClass]="passwordControl && passwordControl.value && passwordControl.value.length >= 6 ? 'text-success' : 'text-gray-500'">check_circle</span>
            <p class="text-sm font-normal leading-normal text-primary">{{ 'AUTH.RESET_PASSWORD.PASSWORD_MIN_LENGTH' | translate }}</p>
        </div>
    </div>
    <div class="mt-10 flex flex-col items-center gap-4">
        <button type="submit" [disabled]="resetPasswordForm.invalid || loading" class="glow flex h-14 w-full items-center justify-center gap-x-3 rounded-lg bg-primary px-6 py-3 text-base font-bold text-white transition-all hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background disabled:opacity-50 disabled:cursor-not-allowed">
            <span class="material-symbols-outlined">shield</span>
            <span *ngIf="!loading">{{ 'AUTH.RESET_PASSWORD.SUBMIT_BUTTON' | translate }}</span>
            <i *ngIf="loading" class="pi pi-spin pi-spinner"></i>
        </button>
        <button type="button" (click)="router.navigate(['/login'])" class="h-14 w-full rounded-lg bg-transparent px-6 py-3 text-base font-medium text-gray-400 transition-colors hover:bg-white/10 hover:text-white focus:outline-none focus:ring-2 focus:ring-white/50">
            {{ 'AUTH.BACK_TO_LOGIN' | translate }}
        </button>
    </div>
  </form>
</div>
