<form [formGroup]="driverForm" (ngSubmit)="onSubmit()">
  @if (errorMessage(); as msg) {
  <div
    class="mb-4 p-3 bg-destructive/10 border border-destructive/30 text-destructive text-sm rounded-md"
  >
    {{ msg }}
  </div>
  }

  <div class="p-fluid grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
    <div class="flex flex-col gap-1">
      <label htmlFor="nombre" class="text-sm font-medium text-muted-foreground"
        >Nombre Completo</label
      >
      <input
        pInputText
        id="nombre"
        formControlName="nombre"
        placeholder="Ej. Juan Pérez"
        class="w-full"
        [ngClass]="{ 'ng-invalid ng-dirty': isInvalid('nombre') }"
        aria-describedby="nombre-error"
      />
      @if (isInvalid('nombre')) {
      <small id="nombre-error" class="text-destructive text-xs">
        @if (driverForm.controls['nombre'].errors?.['required']) { Nombre es requerido. } @if
        (driverForm.controls['nombre'].errors?.['minlength']) { Debe tener al menos 3 caracteres. }
      </small>
      }
    </div>

    <div class="flex flex-col gap-1">
      <label htmlFor="licencia" class="text-sm font-medium text-muted-foreground"
        >Número de Licencia</label
      >
      <input
        pInputText
        id="licencia"
        formControlName="licencia"
        placeholder="Ej. L1234567"
        class="w-full"
        [ngClass]="{ 'ng-invalid ng-dirty': isInvalid('licencia') }"
        aria-describedby="licencia-error"
      />
      @if (isInvalid('licencia')) {
      <small id="licencia-error" class="text-destructive text-xs">Licencia es requerida.</small>
      }
    </div>

    <div class="flex flex-col gap-1">
      <label htmlFor="fechaNacimiento" class="text-sm font-medium text-muted-foreground"
        >Fecha de Nacimiento</label
      >
      <p-datePicker
        id="fechaNacimiento"
        formControlName="fechaNacimiento"
        styleClass="w-full"
        dateFormat="yy-mm-dd"
        [showIcon]="true"
        [inputStyleClass]="'w-full'"
        [ngClass]="{ 'ng-invalid ng-dirty': isInvalid('fechaNacimiento') }"
        aria-describedby="fechaNacimiento-error"
      />
      @if (isInvalid('fechaNacimiento')) {
      <small id="fechaNacimiento-error" class="text-destructive text-xs"
        >Fecha de nacimiento es requerida.</small
      >
      }
    </div>

    <div class="flex flex-col gap-1 md:col-span-2">
      <label htmlFor="activo" class="text-sm font-medium text-muted-foreground">Estado</label>
      <p-select
        id="activo"
        formControlName="activo"
        [options]="statusOptions"
        optionLabel="label"
        optionValue="value"
        placeholder="Seleccione un estado"
        styleClass="w-full"
        [ngClass]="{ 'ng-invalid ng-dirty': isInvalid('activo') }"
        aria-describedby="activo-error"
      />
      @if (isInvalid('activo')) {
      <small id="activo-error" class="text-destructive text-xs">Estado es requerido.</small>
      }
    </div>
  </div>
  <div class="flex justify-end gap-4 mt-8 pt-6 border-t border-border">
    <p-button
      label="Cancelar"
      severity="secondary"
      (click)="onCancel()"
      [outlined]="true"
      [disabled]="isLoading()"
    />
    <p-button
      label="{{ submitButtonLabel() }}"
      icon="pi pi-check"
      type="submit"
      [loading]="isLoading()"
      [disabled]="!canSubmit()"
    />
  </div>
</form>
