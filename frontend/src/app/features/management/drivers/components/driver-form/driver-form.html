<div class="p-6 sm:p-8">
  <form [formGroup]="driverForm" (ngSubmit)="onSubmit()" class="space-y-6">
    @if (errorMessage(); as msg) {
    <div
      class="mb-4 p-3 bg-destructive/10 border border-destructive/30 text-destructive text-sm rounded-md"
    >
      {{ msg }}
    </div>
    }

    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-8">
      <!-- Nombre Completo -->
      <div class="space-y-2 input-field">
        <label
          for="nombre"
          class="flex items-center gap-2 font-display text-base font-medium leading-none text-muted-foreground transition-colors duration-300"
        >
          <span class="material-symbols-outlined text-xl transition-all duration-300">person</span>
          Nombre Completo
        </label>
        <input
          id="nombre"
          type="text"
          pInputText
          formControlName="nombre"
          placeholder="Ej: Juan Pérez"
          class="font-display flex h-12 w-full rounded-md border bg-input px-4 py-2 text-base placeholder:text-muted-foreground/60 transition-all duration-300 focus:border-primary/60 focus:bg-background focus:outline-none focus:ring-2 focus:ring-ring/50 focus:ring-offset-2 focus:ring-offset-background"
        />
        @if (isInvalid('nombre')) {
        <div class="flex items-center gap-2 text-red-600 text-sm mt-1">
          <span class="material-symbols-outlined text-sm">error</span>
          @if (driverForm.controls['nombre'].errors?.['required']) {
          <span>Nombre es requerido.</span> } @if
          (driverForm.controls['nombre'].errors?.['minlength']) {
          <span>Debe tener al menos 3 caracteres.</span> }
        </div>
        }
      </div>

      <!-- Número de Licencia -->
      <div class="space-y-2 input-field">
        <label
          for="licencia"
          class="flex items-center gap-2 font-display text-base font-medium leading-none text-muted-foreground transition-colors duration-300"
        >
          <span class="material-symbols-outlined text-xl transition-all duration-300">pin</span>
          Número de Licencia
        </label>
        <input
          id="licencia"
          type="text"
          pInputText
          formControlName="licencia"
          placeholder="X123-456-789"
          class="font-mono flex h-12 w-full rounded-md border bg-input px-4 py-2 text-base placeholder:text-muted-foreground/60 transition-all duration-300 focus:border-primary/60 focus:bg-background focus:outline-none focus:ring-2 focus:ring-ring/50 focus:ring-offset-2 focus:ring-offset-background"
        />
        @if (isInvalid('licencia')) {
        <div class="flex items-center gap-2 text-red-600 text-sm mt-1">
          <span class="material-symbols-outlined text-sm">error</span>
          <span>Licencia es requerida.</span>
        </div>
        }
      </div>

      <!-- Fecha de Nacimiento -->
      <div class="space-y-2 input-field">
        <label
          for="fechaNacimiento"
          class="flex items-center gap-2 font-display text-base font-medium leading-none text-muted-foreground transition-colors duration-300"
        >
          <span class="material-symbols-outlined text-xl transition-all duration-300"
            >calendar_month</span
          >
          Fecha de Nacimiento
        </label>
        <p-datePicker
          id="fechaNacimiento"
          formControlName="fechaNacimiento"
          styleClass="w-full"
          dateFormat="yy-mm-dd"
          [showIcon]="true"
          [appendTo]="'body'"
          inputStyleClass="font-display flex h-12 w-full rounded-md border bg-input px-4 py-2 text-base placeholder:text-muted-foreground/60 transition-all duration-300 focus:border-primary/60 focus:bg-background focus:outline-none focus:ring-2 focus:ring-ring/50 focus:ring-offset-2 focus:ring-offset-background"
        />
        @if (isInvalid('fechaNacimiento')) {
        <div class="flex items-center gap-2 text-red-600 text-sm mt-1">
          <span class="material-symbols-outlined text-sm">error</span>
          <span>Fecha de nacimiento es requerida.</span>
        </div>
        }
      </div>

      <!-- Estado -->
      <div class="space-y-2 input-field">
        <label
          for="activo"
          class="flex items-center gap-2 font-display text-base font-medium leading-none text-muted-foreground transition-colors duration-300"
        >
          <span class="material-symbols-outlined text-xl transition-all duration-300"
            >toggle_on</span
          >
          Estado
        </label>
        <p-select
          id="activo"
          formControlName="activo"
          [options]="statusOptions"
          optionLabel="label"
          optionValue="value"
          placeholder="Seleccione un estado"
          styleClass="w-full h-12"
        />
        @if (isInvalid('activo')) {
        <div class="flex items-center gap-2 text-red-600 text-sm mt-1">
          <span class="material-symbols-outlined text-sm">error</span>
          <span>Estado es requerido.</span>
        </div>
        }
      </div>
    </div>

    <div class="flex items-center justify-end gap-4 pt-8 mt-8 border-t border-border">
      <button type="button" (click)="onCancel()" [disabled]="isLoading()" class="btn btn-secondary">
        Cancelar
      </button>
      <button type="submit" [disabled]="!canSubmit()" class="btn btn-primary">
        <span *ngIf="isLoading()" class="pi pi-spin pi-spinner" style="margin-right: 0.5rem"></span>
        {{ submitButtonLabel() }}
      </button>
    </div>
  </form>
</div>
