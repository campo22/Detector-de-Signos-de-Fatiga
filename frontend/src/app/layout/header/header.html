<header class="h-20 bg-card border-b border-border flex items-center justify-between px-4 sm:px-6">
  <div class="flex items-center gap-2 sm:gap-4">
    <button (click)="toggleSidebar()" class="p-2 rounded-full hover:bg-muted lg:hidden">
      <span class="material-symbols-outlined text-foreground">menu</span>
    </button>
    <!-- Title and Subtitle -->
    <div>
      <h2 class="text-3xl font-bold text-foreground gradient-text">{{ pageTitle() }}</h2>
      <p class="text-muted-foreground">{{ pageSubtitle() }}</p>
    </div>
  </div>

  <div class="flex items-center space-x-2">
    <button (click)="toggleTheme()" class="p-2 rounded-full hover:bg-muted relative transition-colors">
      <span class="material-symbols-outlined text-foreground">{{ currentTheme() === 'dark' ? 'light_mode' : 'dark_mode' }}</span>
    </button>
    <button (click)="handleNotificationClick($event)" pButton pRipple class="p-2 rounded-full hover:bg-muted relative transition-colors p-button-text p-button-plain">
      <span class="material-symbols-outlined text-foreground">notifications</span>
      <span
        *ngIf="unreadNotificationCount() > 0"
        class="absolute top-1 right-1 block h-5 w-5 rounded-full bg-destructive shadow-glow-destructive flex items-center justify-center text-xs text-white"
      >{{ unreadNotificationCount() }}</span>
    </button>
    <p-menu #notificationMenu [model]="notificationMenuItems()" [popup]="true" styleClass="notification-menu"></p-menu>

    <!-- User Profile Dropdown -->
    <div *ngIf="userProfile()">
      <button type="button" pButton pRipple class="p-button-text p-button-plain" (click)="menu.toggle($event)">
        <div class="flex items-center space-x-2">
          <!-- Avatar with Initials -->
          <div class="w-8 h-8 rounded-full bg-gradient-to-br from-primary to-blue-400 flex items-center justify-center text-white font-semibold text-sm">
            {{ getUserInitials() }}
          </div>
          <div>
            <p class="font-semibold text-foreground text-sm hidden sm:block">{{ userProfile()!.name }}</p>
            <p class="font-semibold text-foreground text-sm sm:hidden">{{ userProfile()!.role | translate }}</p>
            <p class="text-xs text-muted-foreground hidden sm:block">{{ userProfile()!.email }}</p>
          </div>
        </div>
      </button>
      <p-menu #menu [model]="menuItems" [popup]="true"></p-menu>
    </div>
  </div>
</header>
